# !/usr/bin/env python
# _*_ coding:utf-8 _*_
"""
author: HuangWei
"""
import requests
import json
from lxml import etree


url = 'https://tieba.baidu.com/mo/q/m?kw=%E7%BE%8E%E9%A3%9F&pn=0&lp=5024&forum_recommend=1&lm=0&cid=0&has_url_param=0&pn=30&is_ajax=1'
headers = {
    'User-Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.108 Mobile Safari/537.36',
    'Cookie': 'BIDUPSID=0DA456428B1F522085C54C2792DA86FA; PSTM=1567487538; TIEBA_USERTYPE=4fe0d47fa20e2ebf14353163; bdshare_firstime=1567567921880; BDUSS=tWTzBpdFVUZm9nay1oTzhuT1luanpYNjJ-SG83LWNiOG5LTWdRYlpQODQ0cHBkSVFBQUFBJCQAAAAAAAAAAAEAAADKfMOmt-fB98DL19PO98PFzrAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADhVc104VXNdLW; TIEBAUID=7a4a7b31bc8b74b15fa620d5; BAIDUID=879DAF81167E9299BE3F99DE918A6A31:FG=1; MCITY=-131%3A; 2797829322_FRSVideoUploadTip=1; wise_device=0; H_WISE_SIDS=136722_137845_138180_136748_138435_128070_138945_120192_138669_138490_138813_133995_138878_137979_132909_137690_131246_132552_137749_136681_118882_118862_118854_118819_118786_138165_107317_138883_136430_138702_136862_138148_138324_138114_139174_136195_137105_133847_138477_137735_138343_137468_138650_131423_139255_139247_138077_136413_110085_137865_127969_138615_139160_138274_127416_138312_136635_138426_138562_138941_138249_138579; delPer=0; USER_JUMP=-1; mo_originid=2; IS_NEW_USER=18f3150720cd881fa6dfa5e5; BAIDU_WISE_UID=wapp_1576056098791_77; CLIENTHEIGHT=667; CLIENTWIDTH=375; SET_PB_IMAGE_WIDTH=355; SEENKW=%E7%BE%8E%E9%A3%9F%23%C3%C0%CA%B3; BDRCVFR[feWj1Vr5u3D]=I67x6TjHwwYf0; STOKEN=8e464b25d2a94c61ddd2c91ab75792caae2f7199b43b533541d72723b8fc0b8a; PSINO=1; H_PS_PSSID=1436_21079_30210_20697; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; Hm_lvt_98b9d8c2fd6608d564bf2ac2ae642948=1575635150,1576055310,1576207300,1576467745; LASW=599; Hm_lpvt_98b9d8c2fd6608d564bf2ac2ae642948=1576467797'
}

requests.packages.urllib3.disable_warnings()
response = requests.get(url, headers=headers, verify=False)
# print(response.content.decode())
data = json.loads(response.content.decode())
data = data['data']['content']
html_str = etree.HTML(data)
print(type(html_str))
span = html_str.xpath('//span')
print(span)




